{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function sent() {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SuggestTypes = void 0;\nvar react_native_1 = require(\"react-native-web/dist/index\");\nvar YamapSuggests = react_native_1.NativeModules.YamapSuggests;\nvar SuggestTypes;\n(function (SuggestTypes) {\n  SuggestTypes[SuggestTypes[\"YMKSuggestTypeUnspecified\"] = 0] = \"YMKSuggestTypeUnspecified\";\n  SuggestTypes[SuggestTypes[\"YMKSuggestTypeGeo\"] = 1] = \"YMKSuggestTypeGeo\";\n  SuggestTypes[SuggestTypes[\"YMKSuggestTypeBiz\"] = 2] = \"YMKSuggestTypeBiz\";\n  SuggestTypes[SuggestTypes[\"YMKSuggestTypeTransit\"] = 4] = \"YMKSuggestTypeTransit\";\n})(SuggestTypes = exports.SuggestTypes || (exports.SuggestTypes = {}));\nvar suggest = function suggest(query, options) {\n  if (options) {\n    return YamapSuggests.suggestWithOptions(query, options);\n  }\n  return YamapSuggests.suggest(query);\n};\nvar suggestWithCoords = function suggestWithCoords(query, options) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    var suggests;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          return [4, suggest(query, options)];\n        case 1:\n          suggests = _a.sent();\n          return [2, suggests.map(function (item) {\n            return __assign(__assign({}, item), getCoordsFromSuggest(item));\n          })];\n      }\n    });\n  });\n};\nvar reset = function reset() {\n  return YamapSuggests.reset();\n};\nvar getCoordsFromSuggest = function getCoordsFromSuggest(suggest) {\n  var _a, _b, _c, _d;\n  var coords = (_d = (_c = (_b = (_a = suggest.uri) === null || _a === void 0 ? void 0 : _a.split('?')[1]) === null || _b === void 0 ? void 0 : _b.split('&')) === null || _c === void 0 ? void 0 : _c.find(function (param) {\n    return param.startsWith('ll');\n  })) === null || _d === void 0 ? void 0 : _d.split('=')[1];\n  if (!coords) return;\n  var splittedCoords = coords.split('%2C');\n  var lon = Number(splittedCoords[0]);\n  var lat = Number(splittedCoords[1]);\n  return {\n    lat: lat,\n    lon: lon\n  };\n};\nvar Suggest = {\n  suggest: suggest,\n  suggestWithCoords: suggestWithCoords,\n  reset: reset,\n  getCoordsFromSuggest: getCoordsFromSuggest\n};\nexports.default = Suggest;","map":{"version":3,"names":["YamapSuggests","react_native_1","NativeModules","SuggestTypes","exports","suggest","query","options","suggestWithOptions","suggestWithCoords","__awaiter","suggests","_a","sent","map","item","__assign","getCoordsFromSuggest","reset","coords","_d","_c","_b","uri","split","find","param","startsWith","splittedCoords","lon","Number","lat","Suggest","default"],"sources":["/Users/macbook/Projects/FrontEnd/FrontEnd/node_modules/react-native-yamap/src/Suggest.ts"],"sourcesContent":["import { BoundingBox, Point } from './interfaces';\nimport { NativeModules } from 'react-native';\n\nconst { YamapSuggests } = NativeModules;\n\nexport type YamapSuggest = {\n  title: string;\n  subtitle?: string;\n  uri?: string;\n};\nexport type YamapCoords = {\n  lon: number;\n  lat: number;\n};\nexport type YamapSuggestWithCoords = YamapSuggest & Partial<YamapCoords>;\n\nexport enum SuggestTypes {\n  YMKSuggestTypeUnspecified = 0b00,\n  /**\n   * Toponyms.\n   */\n  YMKSuggestTypeGeo = 0b01,\n  /**\n   * Companies.\n   */\n  YMKSuggestTypeBiz = 0b01 << 1,\n  /**\n   * Mass transit routes.\n   */\n  YMKSuggestTypeTransit = 0b01 << 2,\n}\n\nexport type SuggestOptions = {\n  userPosition?: Point;\n  boundingBox?: BoundingBox;\n  suggestWords?: boolean;\n  suggestTypes?: SuggestTypes[];\n};\n\ntype SuggestFetcher = (query: string, options?: SuggestOptions) => Promise<Array<YamapSuggest>>;\nconst suggest: SuggestFetcher = (query, options) => {\n  if (options) {\n    return YamapSuggests.suggestWithOptions(query, options);\n  }\n  return YamapSuggests.suggest(query);\n}\n\ntype SuggestWithCoordsFetcher = (query: string, options?: SuggestOptions) => Promise<Array<YamapSuggestWithCoords>>;\nconst suggestWithCoords: SuggestWithCoordsFetcher = async (query, options) => {\n  const suggests = await suggest(query, options);\n\n  return suggests.map((item) => ({\n    ...item,\n    ...getCoordsFromSuggest(item),\n  }));\n};\n\ntype SuggestResetter = () => Promise<void>;\nconst reset: SuggestResetter = () => YamapSuggests.reset();\n//  Original uri format for the MapKit 4.0.0 ymapsbm1://geo?ll=39.957371%2C48.306156&spn=0.001000%2C0.001000&text=%D0%A0%D0%BE%D1%81%D1%81%D0%B8%D1%8F%2C%20%D0%A0%D0%BE%D1%81%D1%82%D0%BE%D0%B2%D1%81%D0%BA%D0%B0%D1%8F%20%D0%BE%D0%B1%D0%BB%D0%B0%D1%81%D1%82%D1%8C%2C%20%D0%94%D0%BE%D0%BD%D0%B5%D1%86%D0%BA%2C%20%D1%83%D0%BB%D0%B8%D1%86%D0%B0%20%D0%9C%D0%B8%D0%BA%D0%BE%D1%8F%D0%BD%D0%B0%2C%2012\n// Decoded uri format ymapsbm1://geo?ll=39.957371,48.306156&spn=0.001000,0.001000&text=Россия, Ростовская область, Донецк, улица Микояна, 12\ntype LatLonGetter = (suggest: YamapSuggest) => YamapCoords | undefined;\nconst getCoordsFromSuggest: LatLonGetter = (suggest) => {\n  const coords = suggest.uri\n    ?.split('?')[1]\n    ?.split('&')\n    ?.find((param) => param.startsWith('ll'))\n    ?.split('=')[1];\n  if (!coords) return;\n\n  const splittedCoords = coords.split('%2C');\n  const lon = Number(splittedCoords[0]);\n  const lat = Number(splittedCoords[1]);\n\n  return { lat, lon };\n};\n\nconst Suggest = {\n  suggest,\n  suggestWithCoords,\n  reset,\n  getCoordsFromSuggest\n};\n\nexport default Suggest;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGQ,IAAAA,aAAa,GAAKC,cAAA,CAAAC,aAAa,CAAAF,aAAlB;AAarB,IAAYG,YAcX;AAdD,WAAYA,YAAY;EACtBA,YAAA,CAAAA,YAAA,gEAAgC;EAIhCA,YAAA,CAAAA,YAAA,gDAAwB;EAIxBA,YAAA,CAAAA,YAAA,gDAA6B;EAI7BA,YAAA,CAAAA,YAAA,wDAAiC;AACnC,CAAC,EAdWA,YAAY,GAAZC,OAAA,CAAAD,YAAY,KAAZC,OAAA,CAAAD,YAAY;AAwBxB,IAAME,OAAO,GAAmB,SAA1BA,OAAOA,CAAoBC,KAAK,EAAEC,OAAO;EAC7C,IAAIA,OAAO,EAAE;IACX,OAAOP,aAAa,CAACQ,kBAAkB,CAACF,KAAK,EAAEC,OAAO,CAAC;;EAEzD,OAAOP,aAAa,CAACK,OAAO,CAACC,KAAK,CAAC;AACrC,CAAC;AAGD,IAAMG,iBAAiB,GAA6B,SAA9CA,iBAAiBA,CAAoCH,KAAK,EAAEC,OAAO;EAAA,OAAAG,SAAA;;;;;UACtD,WAAML,OAAO,CAACC,KAAK,EAAEC,OAAO,CAAC;;UAAxCI,QAAQ,GAAGC,EAAA,CAAAC,IAAA,EAA6B;UAE9C,WAAOF,QAAQ,CAACG,GAAG,CAAC,UAACC,IAAI;YAAK,OAAAC,QAAA,CAAAA,QAAA,KACzBD,IAAI,GACJE,oBAAoB,CAACF,IAAI,CAAC;UAFD,CAG5B,CAAC;;;;CACJ;AAGD,IAAMG,KAAK,GAAoB,SAAzBA,KAAKA,CAAA,EAAoB;EAAM,OAAAlB,aAAa,CAACkB,KAAK,EAAE;AAArB,CAAqB;AAI1D,IAAMD,oBAAoB,GAAiB,SAArCA,oBAAoBA,CAAkBZ,OAAO;;EACjD,IAAMc,MAAM,IAAAC,EAAA,IAAAC,EAAA,IAAAC,EAAA,IAAAV,EAAA,GAAGP,OAAO,CAACkB,GAAG,cAAAX,EAAA,uBAAAA,EAAA,CACtBY,KAAK,CAAC,GAAG,EAAE,CAAC,eAAAF,EAAA,uBAAAA,EAAA,CACZE,KAAK,CAAC,GAAG,eAAAH,EAAA,uBAAAA,EAAA,CACTI,IAAI,CAAC,UAACC,KAAK;IAAK,OAAAA,KAAK,CAACC,UAAU,CAAC,IAAI,CAAC;EAAtB,CAAsB,eAAAP,EAAA,uBAAAA,EAAA,CACtCI,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC;EACjB,IAAI,CAACL,MAAM,EAAE;EAEb,IAAMS,cAAc,GAAGT,MAAM,CAACK,KAAK,CAAC,KAAK,CAAC;EAC1C,IAAMK,GAAG,GAAGC,MAAM,CAACF,cAAc,CAAC,CAAC,CAAC,CAAC;EACrC,IAAMG,GAAG,GAAGD,MAAM,CAACF,cAAc,CAAC,CAAC,CAAC,CAAC;EAErC,OAAO;IAAEG,GAAG,EAAAA,GAAA;IAAEF,GAAG,EAAAA;EAAA,CAAE;AACrB,CAAC;AAED,IAAMG,OAAO,GAAG;EACd3B,OAAO,EAAAA,OAAA;EACPI,iBAAiB,EAAAA,iBAAA;EACjBS,KAAK,EAAAA,KAAA;EACLD,oBAAoB,EAAAA;CACrB;AAEDb,OAAA,CAAA6B,OAAA,GAAeD,OAAO"},"metadata":{},"sourceType":"script","externalDependencies":[]}